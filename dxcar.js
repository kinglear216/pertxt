window.__require=function e(t,o,n){function c(a,s){if(!o[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var h=o[a]={exports:{}};t[a][0].call(h.exports,function(e){return c(t[a][1][e]||e)},h,h.exports,e,t,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)c(n[a]);return c}({bg:[function(e,t,o){"use strict";cc._RF.push(t,"4fe34NRnJBAGoUK1IOSZH2X","bg"),window.gameOver=!1,window.gameScore=0,window.obstacle_speed=0,window.moveCarLeft=!1,window.moveCarRight=!1,cc.Class({extends:cc.Component,properties:{bgList:[cc.Node],bg_speed:0,scoreLabel:{type:cc.Label,default:null},speedUpAnimation:{type:cc.Sprite,default:null}},onLoad:function(){window.gameOver=!1,window.backgroundCtl=this,this.nodeHeight=this.node.getContentSize().height,this.bg_speed=8,window.obstacle_speed=8,window.gameScore=0,this._timeCallback=function(){this.updateScore()},this.schedule(this._timeCallback,1)},updateScore:function(){if(window.gameScore==200){window.gameOver = !0, backgroundCtl.stopMove(), gameOverCtl.show(), gameOverCtl.scoreLabel.string = window.gameScore + "KM", parent.window.gameFinish(window.gameScore)};window.gameScore+=1;var e=window.gameScore.toString();if(this.scoreLabel.string="\u5df2\u884c\u9a76\u8ddd\u79bb\uff1a"+e+"KM",this.speedUpTips(),window.gameScore>30){var t=window.gameScore-30,o=Math.ceil(t/30);this.bg_speed=8+2*o}window.obstacle_speed=this.bg_speed},getGameScore:function(){return window.gameOver?"":window.gameScore},onDestroy:function(){},stopMove:function(){this.unschedule(this._timeCallback,1),window.gameOver=!0},update:function(e){this.bgMove(this.bgList,this.bg_speed*e*60)},bgMove:function(e,t){if(!window.gameOver){for(var o=0;o<e.length;o++)e[o].y-=t;if(e[0].y<=-this.nodeHeight){var n=e[1].y;e[0].y=n+this.nodeHeight}if(e[1].y<=-this.nodeHeight){var c=e[0].y;e[1].y=c+this.nodeHeight}}},speedUpTips:function(){window.gameOver||window.gameScore>0&&window.gameScore%30==0&&this.speedUpAnimation.getComponent(cc.Animation).play()}}),cc._RF.pop()},{}],canvas:[function(e,t,o){"use strict";cc._RF.push(t,"da5376pVk5O5LCk1hb4OnHz","canvas"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},main_bg:function(){var e=this.node.getComponent(cc.Canvas);cc.winSize.height/cc.winSize.width>2&&(e.fitHeight=!1,e.fitWidth=!0);var t=0;if(cc.sys.os==cc.sys.OS_IOS){var o=cc.view.getFrameSize();t=414==o.width&&896==o.height||375==o.width&&812==o.height}t&&(e.fitHeight=!0,e.fitWidth=!0)},start:function(){}}),cc._RF.pop()},{}],car:[function(e,t,o){"use strict";cc._RF.push(t,"545b3rUZs9BioQQMNejqJjY","car"),cc.Class({extends:cc.Component,properties:{carSprite:{type:cc.Sprite,default:null},carPos:0,touchTime:!0,nodePos:null,carPlace:0},onLoad:function(){cc.director.getCollisionManager().enabled=!0,this.nodePos=this.node.getPosition(),this.node.x=-195,this.carPos=this.node.x,this.carPlace=-1,this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onCollisionEnter:function(){window.gameOver=!0,backgroundCtl.stopMove(),gameOverCtl.show(),gameOverCtl.scoreLabel.string=window.gameScore+"KM",parent.window.gameFinish(window.gameScore)},onTouchStart:function(e){var t=e.getLocation();t.x>=0&&t.x<=0+cc.winSize.width/2?window.moveCarLeft=!0:window.moveCarRight=!0,this.touchTime=!0},onTouchMove:function(e){var t=e.getTouches(),o=this.node.parent.convertToNodeSpaceAR(t[0].getStartLocation()),n=this.node.parent.convertToNodeSpaceAR(t[0].getLocation()),c=o.sub(n);this.node.x=this.nodePos.x-c.x;var i=-this.node.parent.width/2+this.node.width/2,a=Math.abs(i),s=-this.node.parent.height/2+this.node.height/2,r=Math.abs(s),l=this.node.getPosition();l.x<i&&(l.x=i),l.x>a&&(l.x=a),l.y<s&&(l.y=s),l.y>r&&(l.y=r),this.node.setPosition(l)},onTouchEnd:function(){window.moveCarLeft=!1,window.moveCarRight=!1},onTouchCancel:function(){window.moveCarLeft=!1,window.moveCarRight=!1},update:function(e){this.carMove()},carMove:function(){!0!==window.gameOver&&(window.moveCarLeft&&this.carPlace>0&&this.touchTime?(window.moveCarLeft=!1,window.moveCarRight=!1,this.node.x=this.carPos-65,this.carPos=this.node.x,this.carPlace-=1):window.moveCarRight&&this.carPlace<3&&this.touchTime?(window.moveCarLeft=!1,window.moveCarRight=!1,this.node.x=this.carPos+65,this.carPos=this.node.x,this.carPlace+=1):(window.moveCarLeft=!1,window.moveCarRight=!1))}}),cc._RF.pop()},{}],gameOver:[function(e,t,o){"use strict";cc._RF.push(t,"ad2ae3oH6RBgb64aft56mW3","gameOver"),cc.Class({extends:cc.Component,properties:{returnBtn:{type:cc.Button,default:null},m_BlackBG:{type:cc.Sprite,default:null},scoreLabel:{type:cc.Label,default:null},rankLabel:{type:cc.Label,default:null}},onLoad:function(){window.gameOverCtl=this,this.node.x=0,this.node.active=!1,this.returnBtn.node.on(cc.Node.EventType.TOUCH_START,this.returnWelcome,this)},show:function(){this.node.active=!0,this.m_BlackBG.node.runAction(cc.fadeTo(.3,220))},hide:function(){this.node.active=!1,this.m_BlackBG.node.runAction(cc.fadeTo(.3,0))},renderRankLabel:function(e){this.rankLabel.string=e},returnWelcome:function(){parent.window.returnGameWelcome()}}),cc._RF.pop()},{}],obstacle2:[function(e,t,o){"use strict";cc._RF.push(t,"1114fMeoXtCdL02NePhDAvj","obstacle2"),cc.Class({extends:cc.Component,onLoad:function(){window.obstacle2Item=this},obstacle2Move:function(e){this.node.y-=e,this.node.y<=-(cc.winSize.height/2+85)&&obstacleCtl.recovery(this.node)},update:function(e){!0!==window.gameOver&&this.obstacle2Move(window.obstacle_speed*e*60)}}),cc._RF.pop()},{}],obstacle3:[function(e,t,o){"use strict";cc._RF.push(t,"2c631uBXVZN7ZdZrMOmQbnd","obstacle3"),cc.Class({extends:cc.Component,onLoad:function(){window.obstacleItem=this},obstacleMove:function(e){this.node.y-=e,this.node.y<=-(cc.winSize.height/2+38)&&obstacleCtl.recovery(this.node)},update:function(e){!0!==window.gameOver&&this.obstacleMove(window.obstacle_speed*e*60)}}),cc._RF.pop()},{}],obstacleCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"ab97fc1iUhFGbJKGaIoVWPk","obstacleCtrl"),cc.Class({extends:cc.Component,properties:{obstaclePrefab:{type:cc.Prefab,default:null},obstaclePrefab2:{type:cc.Prefab,default:null},obstaclePrefab3:{type:cc.Prefab,default:null},obstaclePrefabsArr:{type:cc.Prefab,default:[]},obstacleNum:2,obstacleTwoNum:2,obstacleThreeNum:1},onLoad:function(){window.obstacleCtl=this,this.obstacleAllPool=new cc.NodePool;var e=cc.instantiate(this.obstaclePrefab3);this.obstacleAllPool.put(e);for(var t=0,o=this.obstacleTwoNum;t<o;++t){var n=cc.instantiate(this.obstaclePrefab2);this.obstacleAllPool.put(n)}for(var c=0,i=this.obstacleNum;c<i;++c){var a=cc.instantiate(this.obstaclePrefab);this.obstacleAllPool.put(a)}this.creatorObstacleAll()},creatorObstacle:function(e,t){var o=[-95,-31,31,95];e.parent=this.node;var n=o[Math.floor(Math.random()*o.length)];e.x=n,e.y=400+400*t},creatorObstacleThree:function(e,t){var o=[-65,0,65];e.parent=this.node;var n=o[Math.floor(Math.random()*o.length)];e.x=n,e.y=400+400*t},creatorObstacleAll:function(){for(var e=0,t=this.obstacleAllPool.size();e<t;++e){var o;"obstaclePrefab"===(o=this.obstacleAllPool.get())._name||"obstaclePrefab2"===o._name?this.creatorObstacle(o,e):"obstaclePrefab3"===o._name&&this.creatorObstacleThree(o,e)}},recovery:function(e){this.obstacleAllPool.put(e),this.obstacleAllPool.size()>=4&&this.creatorObstacleAll()},update:function(e){},onDestroy:function(){this.obstacleAllPool.clear()}}),cc._RF.pop()},{}],obstacle:[function(e,t,o){"use strict";cc._RF.push(t,"fb0d4DGQtVOP74MUyoJjNRl","obstacle"),cc.Class({extends:cc.Component,onLoad:function(){window.obstacleItem=this},obstacleMove:function(e){this.node.y-=e,this.node.y<=-(cc.winSize.height/2+35)&&obstacleCtl.recovery(this.node)},update:function(e){!0!==window.gameOver&&this.obstacleMove(window.obstacle_speed*e*60)}}),cc._RF.pop()},{}],operateBtn:[function(e,t,o){"use strict";cc._RF.push(t,"488abSU46NHUaOyqUX51X4I","operateBtn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},carMove:function(e,t){"left"===t?(window.moveCarLeft=!0,window.moveCarRight=!1):"right"===t&&(window.moveCarLeft=!1,window.moveCarRight=!0)},start:function(){}}),cc._RF.pop()},{}],welcoeme:[function(e,t,o){"use strict";cc._RF.push(t,"128d0NDgytIqY538h0dwpUj","welcoeme"),cc.Class({extends:cc.Component,properties:{startBtn:{type:cc.Sprite,default:null}},onLoad:function(){this.startBtn.node.on("touchstart",this.startBtnHandle,this)},startBtnHandle:function(){cc.director.loadScene("game")}}),cc._RF.pop()},{}]},{},["bg","canvas","car","gameOver","obstacle","obstacle2","obstacle3","obstacleCtrl","operateBtn","welcoeme"]);
